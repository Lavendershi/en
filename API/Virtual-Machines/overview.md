# VM


## Introduction
VM instance, image, instance type, instance template, quota-related APIs


### Version
v1


## API
|Interface name|Request mehod|Function description|
|---|---|---|
|**associateElasticIp**|POST|The Virtual Machines associates the elastic public IP, and the associating is the IP of the elastic public network corresponding to the primary IP and the intranet primary IP.</br>A virtual machine can only associate with an EIP (master network card). If the main network card already exists EIP, the error will be returned.</br>|
|**attachDisk**|POST|Attach a data disk (cloud hard disk) for a virtual machine, and the Virtual Machines and the Cloud Disk Service are not attached when they are in progress. <br></br>The virtual machine status must be running or stopped status. <br></br>The VM of the local disk as system disk can be attached with eight data disks, and the VM of Cloud Disk Service can be attached with seven data disks.</br>|
|**attachNetworkInterface**|POST|A virtual machine attaches an elastic network interface <br></br>The virtual machine status must be running or stopped status without being operated, the task is available. <br></br>If the public IP is associated with the elastic network interface, the az of the public IP needs to be consistent with the az of the Virtual Machines, or the public network IP belongs to the full available zone to be attached. <br></br>The number of the Virtual Machines to attach the elastic network interface cannot exceed the limit of the instance type. Can query <a href='https://www.jdcloud.com/help/detail/2901/isCatalog/1'> DescribeInstanceTypes</a> interface gives specification information for the specified zone or availability zone. <br></br>The elastic network interface and the Virtual Machines must be under the same vpc.</br>|
|**copyImages**|POST|Image inter\-domain replication, copy private images to other regions, allowing  you to operate your private image only. <br></br>Only images of the Cloud Disk Service of system disk are supported.</br>|
|**createImage**|POST|Create a private image for the virtual machine. The virtual machine status must be stopped. <br></br>A virtual machine can create an image with no task in progress. <br></br>If a data disk is attached in the Virtual Machines, the snapshot of data disk is created by default to generate a packaged image. <br></br>After calling the API, the user can not use the image normally until the image status becomes <b>ready</b>.</br>|
|**createInstances**|POST|Create a virtual machine with one or more specified configurations, which is divided into three types: 1. general mode, 2. availability group, 3. use of the starting template. The required transfer of parameters when creating a virtual machine in three ways is different. Please refer to details</a><br></br>\- Creating a VM requires real\-name verification</br>\- Specification Type</br>    \- Can query <a href="https://www.jdcloud.com/help/detail/2901/isCatalog/1">DescribeInstanceTypes</a> Interface gets specification information for a specified domain or availability zone</br>    \- It is not possible to use for off\-line, or a specification ID of the carnation already sold</br>\- image</br>    \- Windows Server 2012 R2 Standard Edition 64\-bit Chinese version SQL Server 2014 Standard SP2 memory needs more than 1 GB;</br>    \- Windows Server all image CPUs must not be selected to exceed 64 cores CPU.</br>    \- Can query <a href="https://www.jdcloud.com/help/detail/2874/isCatalog/1">DescribeImages</a> Interface derives image information for the specified zone.</br>    \- The selected image must support the selected specification type. Can query <a href="https://www.jdcloud.com/help/detail/2872/isCatalog/1">DescribeImageConstraints</a> Interface obtains specification type limit information for the specified image.<br></br>\- Network Instance Type</br>    \- Specify primary network card configuration information</br>        \- SubnetId must be specified</br>        \- You can specify the elastrological specification to constrain the created EIP, the bandwidth value range[1\-100] Mbps, step 1 Mbps</br>        \- The primary intranet IP (priority IpAddress) of the master network card can be specified, at  which time maxCount can only be 1</br>        \- The security group securityGroup needs to be within the same virtual private cloud VPC as the subnet Subnet</br>        \- A security group must be specified when a virtual machine is created, and  at most 5 security groups are specified. If no security group is specified, the default security group is used by default</br>        \- The main network card deveIndex is set to 1</br>\- Storage</br>    \- System Disk</br>        \- Disk classification, system disk support, or cloud</br>        \- Disk Size</br>            \- ERROR: Unable to specify size, default 40GB</br>            \- cloud: Value range: 40\-500GB, and cannot be smaller than the minimum system disk size of image; if not specified, the default is the system disk size in the image</br>        \- Auto\-delete</br>            \- If local, default auto\-deletion, this property cannot be modified</br>            \- True if cloud type\-based Cloud Disk Service are configured</br>    \- Data Disk</br>        \- Disk classification, data disks only support cloud</br>        \- The type of Cloud Disk Service drive can select ssd, premium\-hdd</br>        \- Disk Size</br>            \- premium\-hdd: Range[20, 3000] GB, Step Size: 10G</br>            \- ssd: Range[20, 1000] GB, Step Size: 10G</br>        \- Auto\-delete</br>            \- Auto\-deletion by default, for the data disk or shared data disk of the monthly package, this parameter does not take effect</br>            \- SnapshotId can be specified to create a Cloud Disk Service</br>        \- You can create a disk from a snapshot</br>    \- The VM of local type system can attach 8 Cloud Disk Services</br>    \- The VM of cloud type system can attach 7 Cloud Disk Services</br>\- Billing</br>    \- Billing mode of EIP. If you choose to set separately by consumption, the other billing modes are subject to the machine.</br>    \- The billing mode of the Cloud Disk Service is subject to the machine</br>\- Others</br>    \- After the creation is complete, the machine status is running</br>    \- Only the Linux system Virtual Machines can specify key pair</br>    \- maxCount is the maximum effort, and it is not guaranteed that maxCount can be reached</br>    \- The VM's az replaces the az attribute of the disk</br>\- Password</br>    \- <a href="https://www.jdcloud.com/help/detail/3870/isCatalog/1">Refer to the public parameter specification</a></br>|
|**deleteImage**|DELETE|Delete a private image that only allows you to operate your personal private image.</br>If the image is shared to other users, the image can be deleted only when the sharing is released.</br>|
|**deleteInstance**|DELETE|Delete a single virtual machine that is paid by configuration, or expires in a monthly package. You cannot delete a virtual machine without billing information. <br></br>The virtual machine status must be </b>running</b>, </b>stopped<b>, <b>error<b>, and the virtual machine is not in progress to delete. <br></br>The virtual machine that has not expired in monthly package cannot be deleted. The white list user cannot delete the virtual machine that has expired in monthly package. <br></br>If the data disk attached in the machine is the cloud disk billed by instance type and is not a shared Cloud Disk Service, and the AutoDelete property is true, then the data disk is deleted along with the machine.</br></br>Sensitive operation, enable<a href="https://docs.jdcloud.com/IAM/Operation\-Protection">MFA operation protection</a>|
|**describeImage**|GET|Query image details.</br>|
|**describeImageConstraints**|GET|Query the instance type limit of the image. <br></br>This API allows you to view the type of specifications that are not supported by the image. Only the public image, the third\-party image has a specification type restriction, and the private image of the individual does not have this limit.</br>|
|**describeImageConstraintsBatch**|GET|Batch query image specification type constraints. <br></br>This API allows you to view the type of specifications that are not supported by the image. Only the public image, the third\-party image has a specification type restriction, and the private image of the individual does not have this limit.</br>|
|**describeImageMembers**|GET|Query the image\-shared account list, allowing  you to operate your personal private image only.</br>|
|**describeImages**|GET|Query the image information list. <br></br>This API allows you to query an public image of JD Cloud, a third\-party image, a private image, or an image that other users share to you. <br></br>This API supports paging query with 20 items per page by default.</br>|
|**describeInstance**|GET|Query details for a VM</br>|
|**describeInstancePrivateIpAddress**|GET|Query the private IP address of the VM in batches, and query the primary private IP address in the primary network interface.|
|**describeInstanceStatus**|GET|Batch Query of VM Status|
|**describeInstanceTypes**|GET|Query instance type information list</br>|
|**describeInstanceVncUrl**|GET|Get the virtual machine vnc for connection management of virtual machine. <br></br>The vnc address is valid for 1 hour. If the vnc address is not used within 1 hour after being obtained, it will become invalid automatically and need to be re\-acquired again.</br>|
|**describeInstances**|GET|Batch Query of Virtual Machines Details<br></br>This API supports paging query with 20 items per page by default.</br>|
|**describeQuotas**|GET|Query quota, support: VM, image, key pair, template</br>|
|**detachDisk**|POST|For virtual machine uninstalling data disk, a virtual machine, and a Cloud Disk Service are not loaded until they are in progress. <br></br>|
|**detachNetworkInterface**|POST|The virtual machine will load an elastic network interface. <br></br>The virtual machine status must be running or stopped status without being operated, the task is available. <br></br>The primary network interface cannot be detached.</br>|
|**disassociateElasticIp**|POST|The EIP disassociated from a VM is one that corresponds to the primary network interface and the primary private EIP.</br>|
|**modifyImageAttribute**|POST|Modify the image information, including name and description; Only allow your personal private image to be operated.</br>|
|**modifyInstanceAttribute**|POST|Modify certain VM information, including name and description.</br>|
|**modifyInstanceDiskAttribute**|POST|Modify the attributes of a data disk attached with a VM, including whether to delete with the machine.</br>|
|**modifyInstanceNetworkAttribute**|POST|Modify the virtual machine's elastic network interface properties, including whether to delete with the virtual machine. <br></br>The primary network interface cannot be modified.</br>|
|**modifyInstancePassword**|POST|Modify the virtual machine password and the machine is not allowed to operate when there is no ongoing task. <br></br>The new password will take effect after the VM is rebooted.</br>|
|**rebootInstance**|POST|Reboot a single VM. Only the VM without ongoing tasks and is in the status of <b>running</b> can be rebooted.</br>|
|**rebuildInstance**|POST|Virtual machine uses the specified image to reset the virtual machine image<br></br>The status of the Virtual Machines must be stopped status. <br></br>If the system disk type of the current virtual machine is a WORM type, the replacement image must be an image of the current Disk type;Similarly, if the system disk of the current virtual machine is cloud type, the replacement image must be an image of the clyDisk type. Can query <a href='https://www.jdcloud.com/help/detail/2874/isCatalog/1'> DescribeImages</a> interface gets the image information for the specified zone. <br></br>If you do not specify the image ID, the current machine's original image rebuild system is used by default. <br></br>The specified image must be able to support the instanceType of the current machine, otherwise an error will occur. Query <a href="https://www.jdcloud.com/help/detail/2872/isCatalog/1">DescribeImageConstraints</a> API for instance type limit information about the specified image.</br>|
|**resizeInstance**|POST|Virtual Machines Change Specification Type</br>The status of the Virtual Machines must be stopped status. <br></br>The Cloud Disk Service created in 16 years is the machine of the system disk, and the generation and the second generation specification type are not allowed to be adjusted to each other. <br></br>Local disk (type) is the machine of the system disk, and the first generation and the second generation specification type are not allowed to be adjusted to each other. <br></br>Machine, generation, and second\-generation specification types created using availability group (Ag) do not allow mutual adjustment. <br></br>The cloud disk service (cloud type) is the machine of the system disk, and the generation and the second generation specification type are allowed to adjust to each other. <br></br>If the number of elastic network interfaces in the current machine is greater than the number of elastic network interfaces allowed by the specification type, an error is returned. Can query <a href='https://www.jdcloud.com/help/detail/2901/isCatalog/1'> DescribeInstanceTypes</a> interface gives specification information for the specified zone or availability zone. <br></br>The image used by the current machine needs to support the target specification type to be changed, otherwise the error is returned. Can query <a href="https://www.jdcloud.com/help/detail/2872/isCatalog/1">DescribeImageConstraints</a> Interface obtains specification type limit information for the specified image <br></br>The instance type cannot be changed when the user is in arrears with the VM fees.</br>|
|**shareImage**|POST|Shared Image allows you to operate only your private image, and a single image can be shared for up to 20 JD Cloud accounts. <br></br>The packaging image does not currently support sharing.</br>|
|**startInstance**|POST|Starting a single virtual machine, only the virtual machine with stopped status can be started, and the virtual machine does not have a task in progress to start. <br></br>Only the VM with normal billing status can be started.</br>|
|**stopInstance**|POST|When stop a single VM, only the VM in <b>running</b> status can be stopped, and the VM can only be stopped without any ongoing task</br>|
|**unShareImage**|POST|Unshared images only allow you to operate your personal private image.</br>|
